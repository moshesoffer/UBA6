<Page x:Class="UBA6_Controller_App.View.ChannelPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:UBA6_Controller_App.View"
      xmlns:ui="http://schemas.modernwpf.com/2019"      
      xmlns:vm ="clr-namespace:UBA6_Controller_App.ViewModel"
      xmlns:modern="clr-namespace:ModernWpf;assembly=ModernWpf"
      d:DataContext="{d:DesignInstance Type=vm:ChannelViewModel}"
      mc:Ignorable="d"       
      d:DesignHeight="1000" d:DesignWidth="400"      
      MinHeight="600"
      Title="ChannelPage">
    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <modern:ThemeResources />
            </ResourceDictionary.MergedDictionaries>
            <Style TargetType="Label">
                <Setter Property="Foreground" Value="{StaticResource AccentBrush}" />
                <Setter Property="Background" Value="{DynamicResource SystemAccentColorBrush}"/>
            </Style>
        </ResourceDictionary>
    </Page.Resources>
    <Border BorderBrush="Black" BorderThickness="2" CornerRadius="10" Margin="5"  HorizontalAlignment="Stretch" VerticalAlignment="Top">
        <StackPanel Orientation="Vertical" MinHeight="600" >
            <Grid  d:ShowGridLines="True"  >
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Label Grid.Row="0" Grid.Column="0" d:Content="CH A" Content="{Binding ChannelID,Converter={StaticResource ChannelIDConverter} }"  Style="{StaticResource ChannelStyleLable}"   FontWeight="Bold" />
                <Border Grid.Row="0" Grid.Column="1" CornerRadius="10" BorderBrush="Black" BorderThickness="2" Margin="15"  HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                    <Label  Grid.Row="0" Grid.Column="1"  d:Content="Standby" Content="{Binding ChannleState,Converter = {StaticResource ChannelStateConverter}}"  Style="{StaticResource ChannelStyleLableState}"/>
                    <Border.Style>
                        <Style TargetType="Border">
                            <Setter Property="Background" Value="Transparent"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding ChannleState,Converter = {StaticResource ChannelStateConverter}}" Value="STANDBY">
                                    <Setter Property="Background" Value="Yellow"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding ChannleState,Converter = {StaticResource ChannelStateConverter}}" Value="DELAY">
                                    <Setter Property="Background" Value="LightGreen"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding ChannleState,Converter = {StaticResource ChannelStateConverter}}" Value="CHARGE">
                                    <Setter Property="Background" Value="Red"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding ChannleState,Converter = {StaticResource ChannelStateConverter}}" Value="INIT">
                                    <Setter Property="Background" Value="SpringGreen"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding ChannleState,Converter = {StaticResource ChannelStateConverter}}" Value="DISCHARGE">
                                    <Setter Property="Background" Value="Green"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                </Border>
            </Grid>
            <Grid  d:ShowGridLines="True"  >
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Label Grid.Row="0" Grid.Column="0" Content="Run Time   :" Style="{StaticResource ChannelStyleLabelType}" />
                <Label Grid.Row="0" Grid.Column="1" d:Content="00:00:00"  Content="{Binding RunTime,Converter={StaticResource SpanTimeConverter}}"            Style="{StaticResource ChannelStyleLabelType}"/>
                <Label Grid.Row="1" Grid.Column="0" Content = "Test Name  :" Style="{StaticResource ChannelStyleLabelType}"/>
                <Label Grid.Row="1" Grid.Column="1" d:Content="Chrage Demo"   Content="{Binding TestName }"                                                  Style="{StaticResource ChannelStyleLabelType}"/>
                <Label Grid.Row="2" Grid.Column="0" Content = "Step/Total :" Style="{StaticResource ChannelStyleLabelType}"/>
                <Label Grid.Row="2" Grid.Column="1" d:Content="0/10"          Content="{Binding CurrentStep }"                                                Style="{StaticResource ChannelStyleLabelType}" />
                <Label Grid.Row="3" Grid.Column="0" Content = "Voltage    :" Style="{StaticResource ChannelStyleLabelType}"/>
                <Label Grid.Row="3" Grid.Column="1" d:Content="50"            Content="{Binding BatVoltage     , Converter = {StaticResource VoltageConverter}}" Style="{StaticResource ChannelStyleLabelType}"/>
                <Label Grid.Row="4" Grid.Column="0" Content = "Current    :" Style="{StaticResource ChannelStyleLabelType}"/>
                <Label Grid.Row="4" Grid.Column="1" d:Content="50"            Content="{Binding Current        , Converter = {StaticResource CurrentConverter}}" Style="{StaticResource ChannelStyleLabelType}"/>
                <Label Grid.Row="5" Grid.Column="0" Content = "Capacity   :" Style="{StaticResource ChannelStyleLabelType}"/>
                <Label Grid.Row="5" Grid.Column="1" d:Content="50.4mAh"       Content="{Binding Capsity        , Converter = {StaticResource CapacityConverter}}" Style="{StaticResource ChannelStyleLabelType}"  />
                <Label Grid.Row="6" Grid.Column="0" Content = "Temperature:" Style="{StaticResource ChannelStyleLabelType}"/>
                <Label Grid.Row="6" Grid.Column="1" d:Content="50"            Content="{Binding BatTemp        , Converter = {StaticResource TempConverter}}"    Style="{StaticResource ChannelStyleLabelType}"/>
                <Label Grid.Row="7" Grid.Column="0" Content = "Error      :" Style="{StaticResource ChannelStyleLabelType}"/>
                <Label Grid.Row="7" Grid.Column="1" d:Content="50"            Content="{Binding ChannelError   , Converter = {StaticResource ChannelErrorConverter}}" Style="{StaticResource ChannelStyleLabelType}"/>
            </Grid>
            <ScrollViewer VerticalScrollBarVisibility="Visible" MaxHeight="300">
                <ui:SimpleStackPanel  MaxHeight="800" Orientation="Vertical" Spacing="10">
                    <Expander Header="Other" IsExpanded="False" d:IsExpanded="True">
                        <Grid  d:ShowGridLines="True"  >
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Label Grid.Row="0" Grid.Column="0"  Style="{StaticResource ChannelStyleLabelType}" Content = "Gen Voltage  :" />
                            <Label Grid.Row="0" Grid.Column="1"  Style="{StaticResource ChannelStyleLabelType}" d:Content="50" Content="{Binding GenVoltage  ,Converter = {StaticResource VoltageConverter}}" />
                            <Label Grid.Row="1" Grid.Column="0"  Style="{StaticResource ChannelStyleLabelType}" Content = "Input Voltage(VPS):" />
                            <Label Grid.Row="1" Grid.Column="1"  Style="{StaticResource ChannelStyleLabelType}" d:Content="50" Content="{Binding VpsVoltage  ,Converter = {StaticResource VoltageConverter}}" />
                            <Label Grid.Row="2" Grid.Column="0"  Style="{StaticResource ChannelStyleLabelType}" Content = "Temperature  :" />
                            <Label Grid.Row="2" Grid.Column="1"  Style="{StaticResource ChannelStyleLabelType}" d:Content="50" Content="{Binding AmbTemp     , Converter = {StaticResource TempConverter}}" />
                            <RibbonCheckBox Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" Label="Is Batttery Connected" d:IsChecked="False" Style="{StaticResource ChannelStyleRibbonCheckBox}"  IsChecked="False" FlowDirection="RightToLeft"/>
                        </Grid>
                    </Expander>
                    <Expander Header="ADC" IsExpanded="False" d:IsExpanded="True">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Label Grid.Row = "0" Grid.Column= "0" Style="{StaticResource ChannelStyleLabelType}"  Content="VBat             :" />
                            <Label Grid.Row = "0" Grid.Column= "1" Style="{StaticResource ChannelStyleLabelType}"  Content = "{Binding AdcVbat }"           d:Content = "80" ToolTip="the adc value of the bat"/>
                            <Label Grid.Row = "1" Grid.Column= "0" Style="{StaticResource ChannelStyleLabelType}"  Content="VGen             :" />
                            <Label Grid.Row = "1" Grid.Column= "1" Style="{StaticResource ChannelStyleLabelType}"  Content = "{Binding AdcVgen }"           d:Content = "80" ToolTip="the adc value of the vgen"/>
                            <Label Grid.Row = "2" Grid.Column= "0" Style="{StaticResource ChannelStyleLabelType}"  Content="VPS             :" />
                            <Label Grid.Row = "2" Grid.Column= "1" Style="{StaticResource ChannelStyleLabelType}"  Content = "{Binding AdcVps }"           d:Content = "80" ToolTip="the adc value of the vps"/>
                            <Label Grid.Row = "3" Grid.Column= "0" Style="{StaticResource ChannelStyleLabelType}"  Content="Ambient Temp     :" />
                            <Label Grid.Row = "3" Grid.Column= "1" Style="{StaticResource ChannelStyleLabelType}"  Content = "{Binding AdcAmbTemp }"        d:Content = "80" ToolTip="the adc value of the discharge current"/>
                            <Label Grid.Row = "4" Grid.Column= "0" Style="{StaticResource ChannelStyleLabelType}"  Content="NTC Temp         :" />
                            <Label Grid.Row = "4" Grid.Column= "1" Style="{StaticResource ChannelStyleLabelType}"  Content = "{Binding AdcNtcTemp }"        d:Content = "80" ToolTip="the adc value of the charge current"/>
                            <Label Grid.Row = "5" Grid.Column= "0" Style="{StaticResource ChannelStyleLabelType}"  Content="Discharge current:" />
                            <Label Grid.Row = "5" Grid.Column= "1" Style="{StaticResource ChannelStyleLabelType}"  Content = "{Binding AdcDischargeCurr }"  d:Content = "80" ToolTip="the adc value of the charge current"/>
                            <Label Grid.Row = "6" Grid.Column= "0" Style="{StaticResource ChannelStyleLabelType}"  Content="Charge current   :" />
                            <Label Grid.Row = "6" Grid.Column= "1" Style="{StaticResource ChannelStyleLabelType}"  Content = "{Binding AdcChargeCurr }"     d:Content = "80" ToolTip="the adc value of the charge current"/>

                        </Grid>
                    </Expander>
                    <Expander Header="States" IsExpanded="False" d:IsExpanded="True">
                        <Grid  d:ShowGridLines="True"  >
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Label Grid.Row="0" Grid.Column="0" Style="{StaticResource ChannelStyleLabelType}" Content="Line State :" />
                            <Label Grid.Row="0" Grid.Column="1" Style="{StaticResource ChannelStyleLabelType}" d:Content="BlaBla" Content="{Binding LineState , Converter={StaticResource LineStateConverter}}"  ToolTip="the adc value of the charge current"/>
                            <Label Grid.Row="0" Grid.Column="2" Style="{StaticResource ChannelStyleLabelType}" Content="Error :" />
                            <Label Grid.Row="0" Grid.Column="3" Style="{StaticResource ChannelStyleLabelType}" d:Content="BlaBla" Content="{Binding LineError }"  ToolTip="the adc value of the charge current"/>
                            <Label Grid.Row="1" Grid.Column="0" Style="{StaticResource ChannelStyleLabelType}" Content="Channel State :" />
                            <Label Grid.Row="1" Grid.Column="1" Style="{StaticResource ChannelStyleLabelType}" d:Content="BlaBla" Content="{Binding ChannleState }"  ToolTip="the adc value of the charge current"/>
                            <Label Grid.Row="1" Grid.Column="3" Style="{StaticResource ChannelStyleLabelType}" d:Content="BlaBla" Content="{Binding ChannelError }"  ToolTip="the adc value of the charge current"/>
                            <Label Grid.Row="2" Grid.Column="0" Style="{StaticResource ChannelStyleLabelType}" Content="BPT State :" />
                            <Label Grid.Row="2" Grid.Column="1" Style="{StaticResource ChannelStyleLabelType}" d:Content="BlaBla" Content="{Binding BPT_State }"  ToolTip="the adc value of the charge current"/>
                            <Label Grid.Row="2" Grid.Column="3" Style="{StaticResource ChannelStyleLabelType}" d:Content="BlaBla" Content="{Binding BPT_Error }"  ToolTip="the adc value of the charge current"/>
                            <Label Grid.Row="3" Grid.Column="0" Style="{StaticResource ChannelStyleLabelType}" Content="Buck-Boost State:" />
                            <Label Grid.Row="3" Grid.Column="1" Style="{StaticResource ChannelStyleLabelType}" d:Content="BlaBla" Content="{Binding BUCK_BOOT_State }"  ToolTip="the adc value of the charge current"/>
                        </Grid>
                    </Expander>
                </ui:SimpleStackPanel>
            </ScrollViewer>
        </StackPanel>
    </Border>
</Page>
